<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Tracking Plan - ASI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <canvas id="meshBg" class="mesh-bg"></canvas>
  <div id="app">
    <div class="plan-container">
      <div class="plan-header">
        <p class="plan-kicker">ASI // Mission Brief</p>
        <h1 class="plan-title">Your Tracking Plan</h1>
        <p class="plan-subtitle">Tune your target stack, then launch autonomous tracking.</p>
      </div>

      <div class="agent-broadcast glass-panel">
        <p class="agent-label">AGENT VOICE</p>
        <p id="agentLine" class="agent-line">Reading scene intent. Stand by for mission-grade recommendations.</p>
      </div>

      <div id="loadingState" class="loading-state">
        <div class="loading-spinner"></div>
        <p id="loadingLine">Building tactical object priorities...</p>
      </div>

      <div id="planContent" class="plan-content" style="display: none;">
        <!-- Objects Section -->
        <div class="plan-section glass-panel">
          <h3 class="section-title">Target Stack</h3>
          <p class="section-subtitle">Add or remove any objects before launch.</p>
          <div id="objectsList" class="objects-list"></div>
          <div class="add-object-form">
            <input
              type="text"
              id="customObjectInput"
              class="glass-input"
              placeholder="Add custom target..."
            />
            <button id="addObjectBtn" class="btn-secondary">Add</button>
          </div>
        </div>

        <div class="plan-section glass-panel">
          <h3 class="section-title">Mission Pulse</h3>
          <p class="feature-justification">The ASI agent keeps scanning, adapts object confidence in real time, and calls out high-value hits instantly.</p>
        </div>

        <div class="plan-section glass-panel qr-section">
          <h3 class="section-title">Scan To Open Phone Camera</h3>
          <p class="section-subtitle">Point your phone at this QR to jump straight into the camera streamer.</p>
          <div class="qr-layout">
            <img id="cameraQrImage" class="camera-qr-image" alt="QR code for camera page" />
            <div class="qr-meta">
              <a id="cameraPageLink" class="camera-page-link" target="_blank" rel="noopener noreferrer"></a>
              <p id="cameraQrHint" class="camera-qr-hint"></p>
            </div>
          </div>
        </div>

        <button id="confirmBtn" class="btn-primary btn-large">
          Launch Mission Control â†’
        </button>
      </div>

      <div id="errorState" class="error-state" style="display: none;">
        <p>Unable to generate plan. Please try again.</p>
        <button id="retryBtn" class="btn-secondary">Retry</button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/plan.ts"></script>
</body>
</html>
